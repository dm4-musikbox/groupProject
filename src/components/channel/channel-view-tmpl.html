<div>
  <main class="channel-view">
  <section class="top-audio-player-container">
    <div class="top-audio-player">
      <div
          id="play-button"
          ng-click="$ctrl.wavesurfer.play()"
      >
          <i class="material-icons md-72">
              play_circle_outline
          </i>
      </div>
        <div class="waves">
           <div id="waveform"></div>
        <!-- pause button
        <i class="material-icons md-72">pause_circle_outline</i> -->
        </div>
    </div>
  </section>
    <div class="channel-nav">
        <div class="channel-info">
          <div class="channel-name">{{ $ctrl.channel.name }}</div>
          <div class="channel-description"><em>{{ $ctrl.channel.description }}</em></div>
        </div>
        <div class="channe-buttons">
          <div id="side-nav-icon">
            <i class="material-icons md-24 button-collapse" data-activates="list-nav" data-sidenav="right" data-menuwidth="298" data-closeonclick="false">queue_music</i>
              <!-- Show side-nav -->
          </div>
          <div>
            <i class="material-icons">
                <a
                    class="button-collapse"
                    data-activates="channelSideNav"
                    data-closeonclick="false"
                    data-menuwidth="300"
                    data-sidenav="right"
                    href="#"
                >
                    settings
                </a>
            </i>
          </div>
        </div>
    </div>

         <!-- <div class="message">
      <div class="row">
        <div class="user-image-container col s1">
          <img class="user-image" src="{{ user }}"/>
        </div>
        <div class="name-stamp col s9">
          <div class="user-name">
             Theo Beck -->

    <section class="chat-window">
      <div
          class="message"
          ng-if="$ctrl.channel.channelMessages"
          ng-repeat="message in $ctrl.channel.channelMessages"
      >
        <div class="row">
          <div class="user-image-container col s1">
            <img class="user-image" src="{{ message.author.photo }}"/>
          </div>
          <div class="name-stamp col s6">
            <div class="user-name">
               {{ message.author.userName || message.author.fullName }}
            </div>
            <div class="time-stamp">
              {{ message.timestamp | date: 'short' }}
            </div>
          </div>
          <div class="content col s10">
            <div>{{ message.content }}

              <div class="tools">
                <i ng-click="updateMessage( )" class="material-icons create">create</i>
                <i ng-click="deleteMessage( )" class="material-icons delete">clear</i>
              </div>
          </div>
      </div>

    </div>

    </section>
<!--
  <section class="playlist-sect">
    <div class="playlist">
      <div class="playlist-title">
         Studio</br> Playlist
      </div>
      <div class="song">

      </div>
    </div>
  </section> -->

  <!-- <ul id="nav-mobile" class="side-nav">
    <li><div class="userView">
      <div class="background">
        <img src="{{ playlist }}"/>
      </div>
      <a href="#!user">
      <a href="#!name"><span class="white-text name">John Doe</span></a>
      <a href="#!email"><span class="white-text email">jdandturk@gmail.com</span></a>
    </div></li>
    <li><a href="#!"><i class="material-icons">cloud</i>First Link With Icon</a></li>
    <li><a href="#!">Second Link</a></li>
    <li><div class="divider"></div></li>
    <li><a class="subheader">Subheader</a></li>
    <li><a class="waves-effect" href="#!">Third Link With Waves</a></li>
  </ul> -->


<!-- Side Nav  -->
  <div id="list-nav" class="side-nav">
    <div class="title-section">
      <div class="title"> Channel </br> Playlist </div>
      <img src="{{ playlist }}" id="pic" style="max-height: 204px; border-bottom: 5px solid cadetblue;"/>
      <div class="pic-container">

      </div>
    </div>
    <div class="playlist">
      <ul>
        <li><a class="waves-effect" href="#"> <i class="material-icons md-24">play_circle_filled</i>"Hello World" by Theo </a></li>
        <li><a class="waves-effect" href="#"> <i class="material-icons md-24">play_circle_filled</i> '11/8/16 | 9:51 a.m.' by Carlos</a></li>
        <li><a class="waves-effect" href="#"> <i class="material-icons md-24">play_circle_filled</i>"Paradise" by Andrew</a></li>
      </ul>
    </div>
  </div>
<!--
  <a href="#" class="button-collapse" data-activates="list-nav" data-sidenav="right" data-menuwidth="298" data-closeonclick="false">
    <i class="material-icons">queue_music</i>
      Show side-nav
  </a>  -->

  <div class="footer">
    <div class="message-input-field">
      <div id="mic-sec">
        <div id="mic-icon">
          <i class="material-icons md-32">mic_none</i>
        </div>
      </div>
      <form id="message-form" ng-keypress="$ctrl.sendAndSaveMessage( $event, $ctrl.message )">
        <textarea id="message-input" ng-model="$ctrl.message.content" placeholder="Let's Talk Music!" spellcheck="true"></textarea>
      </form>
    </div>
  </div>


  </main>
</div>

<!-- Dropdown Structure -->
<div id='channelSideNav' class="side-nav">
    <ul class="collapsible" data-collapsible="accordion" watch>
        <li>
            <div class="collapsible-header">View channel details</div>
            <div class="collapsible-body" style="padding: 0.5em">
                <h5>Created by</h5>
                    <span>{{ $ctrl.channel.createdBy.fullName }}</span>
                <h5 ng-if="$ctrl.channel.admins.length">Collaborators</h5>
                    <div ng-repeat="admin in $ctrl.channel.admins">
                        <i
                            class="material-icons"
                            ng-if="$ctrl.isUserChannelCreator"
                            ng-click="$ctrl.removeUserFromChannel( $ctrl.channel._id, admin._id, 'admin' )"
                        >
                            remove_circle
                        </i>
                        {{ admin.fullName }}
                    </div>
                <h5 ng-if="$ctrl.channel.members.length">Members</h5>
                    <div ng-repeat="member in $ctrl.channel.members">
                        <i
                            class="material-icons"
                            ng-if="$ctrl.isUserChannelCreator"
                            ng-click="$ctrl.removeUserFromChannel( $ctrl.channel._id, member._id, 'member' )"
                        >
                            remove_circle
                        </i>
                        {{ member.fullName }}
                    </div>
            </div>
        <li ng-show="$ctrl.isUserAdmin || $ctrl.isUserChannelCreator">
            <a
                href='#invite-admin-modal'
                modal
                ng-click="this.showInviteModalOverlay = !this.showInviteModalOverlay"
            >
                Invite collaborators
            </a>
        </li>
        <li ng-show="!$ctrl.isUserAnon">
            <a
                href='#invite-member-modal'
                modal
                ng-click="this.showInviteModalOverlay = !this.showInviteModalOverlay"
            >
                Invite listeners
            </a>
        </li>
        </li>
        <li class="divider"></li>
        <li
            ng-show="!$ctrl.isUserMember"
            ng-hide="$ctrl.isUserAdmin || $ctrl.isUserChannelCreator"
            ng-click="$ctrl.addUserToChannel( $ctrl.channel._id, $ctrl.user._id, 'member' ); $ctrl.isUserMember = !$ctrl.isUserMember"
        >
            <a href='javascript:void(0);'>
                Subscribe
            </a>
        </li>
        <li
            ng-show="$ctrl.isUserMember"
            ng-click="$ctrl.removeUserFromChannel( $ctrl.channel._id, $ctrl.user._id, 'member' ); $ctrl.isUserMember = !$ctrl.isUserMember"
        >
            <a href='javascript:void(0);'>
                Unsubscribe
            </a>
        </li>
        <li
            ng-click="$ctrl.addUserToChannel( $ctrl.channel._id, $ctrl.user._id, 'admin' ); $ctrl.isUserAdmin = !$ctrl.isUserAdmin"
            ng-show="!$ctrl.isUserAdmin && $ctrl.isUserChannelCreator"
        >
            <a href='javascript:void(0);'>
                Join collaboration
            </a>
        </li>
        <li
            ng-click="$ctrl.removeUserFromChannel( $ctrl.channel._id, $ctrl.user._id, 'admin' ); $ctrl.isUserAdmin = !$ctrl.isUserAdmin"
            ng-show="$ctrl.isUserAdmin || $ctrl.isUserAdmin && $ctrl.isUserChannelCreator"
        >
            <a href='javascript:void(0);'>
                Leave collaboration
            </a>
        </li>
        <li
            ng-click="$ctrl.deleteChannel()"
            ng-show="$ctrl.isUserChannelCreator"
        >
            <a href='javascript:void(0);'>
                Delete channel
            </a>
        </li>

    </ul>
</div>

<!-- Modal Structure -->
<div
    class="modal modal-fixed-footer"
    id="invite-admin-modal"
>
    <div class="modal-content" id="create-channel-modal-content">
        <h4>Invite collaborators</h4>
        <p>Connect with other musicians and make sweet music together.</p>
        <div class="row">
            <div
              angucomplete-alt
              class="col s6 m6 l6"
              clear-selected="true"
              description-field="genre"
              id="collaborators"
              image-field="photo"
              input-class="form-control form-control-small"
              minimum-length="1"
              pause="400"
              placeholder="Send invites to collaborators: (optional)"
              remote-url="http://localhost:5000/api/users/find?searchStr="
              selected-object="$ctrl.inviteUserAsAdmin"
              title-field="fullName"
            >
            </div>
            <div class="col s6 m6 l6">
                <div class="chip" ng-repeat="user in $ctrl.invitedAsAdmin">
                    <img ng-if="user.image" ng-src="{{ user.image }}" alt="Contact Person">
                    {{ user.title }}
                    <i
                        class="close material-icons"
                        ng-click="$ctrl.removeFromInvites( user, 'admin' )"
                    >
                        close
                    </i>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <a
            class="modal-action modal-close waves-effect waves-green btn-flat"
            href=""
            ng-click="$ctrl.confirmInvites()"
        >
            Invite
        </a>
        <a
            class="modal-close waves-effect waves-green btn-flat"
            href=""
            ng-click="$ctrl.cancelInvites()"
        >
            Cancel
        </a>
    </div>
</div>

<!-- Modal Structure -->
<div
    class="modal modal-fixed-footer"
    id="invite-member-modal"
>
    <div class="modal-content" id="create-channel-modal-content">
        <h4>Invite listeners</h4>
        <p>Connect with your audience and get feedback on your latest masterpiece(s).</p>
        <div class="row">
            <div
              angucomplete-alt
              class="col s6 m6 l6"
              clear-selected="true"
              description-field="genre"
              id="members"
              image-field="photo"
              input-class="form-control form-control-small"
              minimum-length="1"
              pause="400"
              placeholder="Send invites to listeners: (optional)"
              remote-url="http://localhost:5000/api/users/find?searchStr="
              selected-object="$ctrl.inviteUserAsMember"
              title-field="fullName"
            >
            </div>

            <div class="col s6 m6 l6">
                <div class="chip" ng-repeat="user in $ctrl.invitedAsMember">
                    <img ng-if="user.image" ng-src="{{ user.image }}" alt="Contact Person">
                    {{ user.title }}
                    <i
                        class="close material-icons"
                        ng-click="$ctrl.removeFromInvites( user, 'member' )"
                    >
                        close
                    </i>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <a
            class="modal-action modal-close waves-effect waves-green btn-flat"
            href=""
            ng-click="$ctrl.confirmInvites()"
        >
            Invite
        </a>
        <a
            class="modal-close waves-effect waves-green btn-flat"
            href=""
            ng-click="$ctrl.cancelInvites()"
        >
            Cancel
        </a>
    </div>
</div>

<!-- <div
    class="lean-overlay lean-overlay-fix"
    id="materialize-lean-overlay-1"
    ng-if="showInviteModalOverlay"
    style="z-index: 1002; display: block; opacity: 0.9; height: 100vh; background-color: black;"
>
</div> -->
